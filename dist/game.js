function createCharacter(){var e=document.createElement("canvas"),t=e.getContext("2d"),a=e.style;e.width=characterSize,e.height=characterSize,a.width=characterSize+"px",a.height=characterSize+"px",a.position="absolute",a.top="25px",a.left="10px",currentCharacterPosition.x=10,currentCharacterPosition.y=25;var n=5*characterSize/24,r=n,i=n,l=2*characterSize/24,h=2*characterSize/3,o=h,s=(o-2*i)/(h-r),d=(2*i-o+l)/(r-l-h),g=characterSize/5,c=characterSize/5;return t.beginPath(),t.arc(r,i,n,Math.PI/2,3*Math.PI/2),t.lineTo(r+l,0),t.arc(r+l,i,n,3*Math.PI/2,Math.PI/2),t.lineTo(r,2*i),t.lineTo(h,o),t.lineTo(h+2*l,o-l),t.lineTo(r+l,2*i),t.moveTo(h,o),t.lineTo(h+g,g*s+o),t.moveTo(h+2*l,o-l),t.lineTo(h+2*l+g-10,(g-10)*d+o-l),t.moveTo(r,2*i),t.lineTo(r-c,2*i),t.moveTo(r+l,2*i),t.lineTo(r+2*c,2*i+5),t.moveTo(r-15+2,i),t.arc(r-15,i,2,0,2*Math.PI),t.stroke(),e}var characterObject,checkProgress,allAntennas,initializeBackground=function(){"use strict";var d,o,s,g,r,i,c,p=[],l=100,m=4,y=0,x=1;function h(){this.antennaWrapper=document.createElement("div");var e=g.width,t=g.height,a=[0,3*t],n=[3*e,0],r=[6*e,3*t],i=[e,2*t],l=[5*e,2*t],h=[2*e,t],o=[4*e,t];this.rangeCenter=n,this.antennaElement=document.createElement("canvas"),this.antennaElement.style.width=6*e+"px",this.antennaElement.style.height=3*t+"px";var s=this.antennaElement.getContext("2d");s.lineWidth="5px",this.antennaElement.setAttribute("id","antenna-"+d),this.antennaElement.width=6*e,this.antennaElement.height=3*t,s.moveTo(a[0],a[1]),s.lineTo(n[0],n[1]),s.lineTo(r[0],r[1]),s.lineTo(i[0],i[1]),s.lineTo(l[0],l[1]),s.lineTo(h[0],h[1]),s.lineTo(o[0],o[1]),s.lineTo(i[0],i[1]),s.lineTo(l[0],l[1]),s.lineTo(a[0],a[1]),s.lineTo(r[0],r[1]),s.stroke(),s.closePath(),this.antennaWrapper.appendChild(this.antennaElement),this.rangeElem=document.createElement("div"),this.rangeRadius=c}window.levelUp=function(e){var t=document.getElementById("gameboard");clearInterval(i),l-=e,g.height--,c--,setInterval(v,l),2<p.length&&(t.removeChild(p[p.length-1].antennaWrapper),p.pop())};var u=1;function w(e){e.rangeRadius=c/u;var t=e.rangeRadius;e.rangeElem.style.width=t+"px",e.rangeElem.style.height=t+"px",e.rangeElem.style.position="absolute",e.rangeElem.style.borderWidth="0px 2px",e.rangeElem.style.borderColor="red",e.rangeElem.style.borderStyle="dotted",e.rangeElem.style.borderRadius="50%",e.rangeElem.style.left=e.rangeCenter[0]-t/2+"px",e.rangeElem.style.top=e.rangeCenter[1]-t/2+"px",e.antennaWrapper.append(e.rangeElem)}function v(){var e,t,a=0;for(a=0;a<p.length;a++){var n=p[a],r=parseFloat(n.antennaElement.style.width),i=parseFloat(n.antennaElement.style.height);n.antennaElement.style.width=r-.3+"px",n.antennaElement.style.height=i-1+"px";var l=parseFloat(n.antennaWrapper.style.left)-m;l<6*g.width?(n.antennaElement.style.width=6*g.width+"px",n.antennaElement.style.height=3*g.height+"px",n.y=s-3*g.height,n.x=Math.random()*(o-g.width-20),n.radius=n.x,n.pathRadius=Math.abs(y-n.x),n.antennaWrapper.style.top=n.y+"px",n.antennaWrapper.style.left=n.x+"px"):(n.x=l,n.antennaWrapper.style.left=n.x+"px",n.y=(void 0,t=(e=n).x,gamebordDim.height-Math.sqrt(e.radius*e.radius-t*t)-3*g.height),n.antennaWrapper.style.top=n.y+"px"),u=u%7+1,n.rangeRadius=c/u;var h=n.rangeRadius;n.rangeElem.style.width=h+"px",n.rangeElem.style.height=h+"px",n.rangeElem.style.left=n.rangeCenter[0]-h/2+"px",n.rangeElem.style.top=n.rangeCenter[1]-h/2+"px",x=x%3+1}}return function(e,t,a,n){return d=e||5,s=a,(o=t)-50,c=10*(g=n).width,r=document.getElementById("gameboard"),function(){var e,t=0;for(t=0;t<d;t++)(e=new h).x=Math.random()*(o-6*g.width),e.y=Math.random()*(s-3*g.height),e.radius=e.x,e.antennaWrapper.style.position="absolute",e.antennaWrapper.style.left=e.x+"px",e.antennaWrapper.style.top=e.y+"px",p.push(e),r.appendChild(e.antennaWrapper),w(e)}(),i=setInterval(v,l),p}}(),gamebordDim={width:600,height:600},playerDim={height:50,width:50},antennaDim={width:12,height:48},ymotion=gamebordDim.height-playerDim.height,x=0,motionCenter={y:gamebordDim.height,x:gamebordDim.width},radius=motionCenter.x-x,noOfAntennas=3,characterSize=100,currentCharacterPosition={},characterSwingLimit=15,characterDirection=1,greyLine=document.getElementById("grey-line"),redLine=document.getElementById("red-line");function stopCheckingProgress(){clearInterval(checkProgress)}function initializeSizes(){var e=document.getElementById("gameboard");e.style.width=gamebordDim.width+"px",e.style.height=gamebordDim.height+"px",e.style.margin="auto";var t=document.getElementById("player");t.style.width=playerDim.width+"px",t.style.height=playerDim.height+"px",characterObject=createCharacter(),t.appendChild(characterObject),setInterval(function(){var e=currentCharacterPosition.y-parseFloat(characterObject.style.top);Math.abs(e)>characterSwingLimit&&(characterDirection*=-1),characterObject.style.top=parseFloat(characterObject.style.top)-characterDirection+"px"},20)}function shiftPlayer(e,t){var a=document.getElementById("player");a.style.left=e+"px",a.style.top=t+"px"}function getRandomPosition(e){return Math.random()*e}function getCircularMotion(e){var t=gamebordDim.width-e;return gamebordDim.height-Math.sqrt(radius*radius-t*t)}function movePlayer(){document.getElementById("player");(x<5||gamebordDim.width-x>radius)&&(x=gamebordDim.width-playerDim.width),shiftPlayer(x=(x-5)%gamebordDim.width,getCircularMotion(x))}function isPlayerInRange(){var e=!1,t=player.getClientRects()[0],a={x:0,y:0,width:0,height:0};for(var n in allAntennas){a=allAntennas[n].antennaWrapper.getClientRects()[0];var r=t.x>a.x-t.width&&t.x<a.x+a.width,i=t.y>a.y-t.height&&t.y<a.y+a.height;if(r&&i){e=!0;break}}setProgressBar(e)}function setProgressBar(e){var t=parseInt(greyLine.style.width),a=parseInt(redLine.style.width);e?(greyLine.style.width||(greyLine.style.width="35px"),greyLine.style.width=t+10+"px"):(redLine.style.width||(redLine.style.width="0px"),redLine.style.width=a+2+"px"),t+5<=a&&(alert("You lost! Refresh page to play again"),stopCheckingProgress()),(.75<a/gameboard.getClientRects()[0].width||.75<t/gameboard.getClientRects()[0].width)&&(redLine.style.width=a/2+"px",greyLine.style.width=t/2+"px",levelUp(1))}function grabSignal(e){var t=e.x-gameboard.getClientRects()[0].left;x=t,movePlayer()}initializeSizes(),allAntennas=initializeBackground(noOfAntennas,gamebordDim.width,gamebordDim.height,antennaDim),setProgressBar(!0),checkProgress=setInterval(isPlayerInRange,100);